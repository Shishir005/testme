pipeline {
    agent none

    stages {

        stage ('initialization') {
            agent any

            steps {
                echo 'initialization, '
                    script {

                    sh 'terraform init'

                    }

            }
        }
        stage ('plan') {
            agent any

            steps {
                echo 'plan, '
                    script {

                    sh 'terraform plan'

                    }

            }
        }
        stage ('apply') {
            agent any

            steps {
                echo 'apply, '
                    script {

                    sh 'terraform apply'

                    }

            }
        }
    }
}